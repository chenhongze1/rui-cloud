# RUI框架演示应用配置
server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true

spring:
  application:
    name: rui-demo-web
  
  profiles:
    active: dev
  
  # 数据源配置
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/rui_demo?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
    username: root
    password: 123456
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      pool-name: HikariCP
      max-lifetime: 1800000
      connection-timeout: 30000
      connection-test-query: SELECT 1
  
  # Redis配置
  data:
    redis:
      host: localhost
      port: 6379
      password: 
      database: 0
      timeout: 10s
      lettuce:
        pool:
          min-idle: 0
          max-idle: 8
          max-active: 8
          max-wait: -1ms
  
  # JPA配置
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true
  
  # Jackson配置
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
    property-naming-strategy: SNAKE_CASE
    default-property-inclusion: NON_NULL
  
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath*:mapper/**/*Mapper.xml
  type-aliases-package: com.rui.demo.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: false
    call-setters-on-nulls: true
    jdbc-type-for-null: 'null'
  global-config:
    db-config:
      id-type: ASSIGN_ID
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# Actuator监控配置
management:
  endpoints:
    enabled-by-default: false
    web:
      exposure:
        include: 'health'
  endpoint:
    health:
      enabled: true
      show-details: when-authorized
  metrics:
    enabled: false

# 日志配置
logging:
  level:
    com.rui: DEBUG
    org.springframework.security: DEBUG
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  pattern:
    console: '%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx'
    file: '%d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${PID:- } --- [%t] %-40.40logger{39} : %m%n%wEx'
  file:
    name: logs/rui-demo-web.log
    max-size: 100MB
    max-history: 30

# RUI框架配置
rui:
  # 核心配置
  core:
    enabled: true
  
  # 安全配置
  security:
    enabled: true
    jwt:
      secret: ruiFrameworkJwtSecretKey2024
      expiration: 86400
      header: Authorization
      prefix: 'Bearer '
    cors:
      enabled: true
      allowed-origins: '*'
      allowed-methods: '*'
      allowed-headers: '*'
      allow-credentials: true
  
  # Redis配置
  redis:
    enabled: true
    key-prefix: 'rui:demo:'
    timeout: 10s
  
  # 分布式锁配置
  lock:
    enabled: true
    type: redis
    redis:
      key-prefix: 'rui:lock:'
      lease-time: 30
      wait-time: 10
  
  # 多租户配置
  tenant:
    enabled: false
    ignore-tables:
      - sys_user
      - sys_role
      - sys_menu
    ignore-urls:
      - /api/demo/**
  
  # 限流配置
  rate-limit:
    enabled: true
    type: redis
    redis:
      key-prefix: 'rui:rate_limit:'
  
  # 日志配置
  log:
    enabled: true
    operation:
      enabled: true
      save-request-data: true
      save-response-data: true
    access:
      enabled: true
      ignore-urls:
        - /actuator/**
        - /swagger-ui/**
        - /v3/api-docs/**
    performance:
      enabled: true
      slow-threshold: 3000
  
  # 监控配置
  monitoring:
    enabled: false
    metrics:
      enabled: false
      jvm: false
      system: false
      http: false
      database: false
      redis: false
      business: false
    health:
      enabled: false
      database: false
      redis: false
      disk-space: false
    performance:
      enabled: false
      method-monitoring: false
      slow-detection: false
      resource-monitoring: false
    alert:
      enabled: false
  
  # 链路追踪配置
  tracing:
    enabled: true
    sampling-rate: 1.0
    jaeger:
      enabled: false
      endpoint: http://localhost:14268/api/traces
    zipkin:
      enabled: false
      endpoint: http://localhost:9411/api/v2/spans
  
  # 配置管理
  config:
    enabled: true
    dynamic-refresh: true
    encryption:
      enabled: false
      algorithm: AES
      key: ruiConfigEncryptionKey2024
  
  # 工具类配置
  utils:
    enabled: true
    crypto:
      aes-key: ruiFrameworkAESKey2024
      salt-length: 16

# Redisson配置
redisson:
  config: |
    singleServerConfig:
      address: redis://localhost:6379
      password: null
      database: 1
      connectionMinimumIdleSize: 5
      connectionPoolSize: 20
      idleConnectionTimeout: 10000
      connectTimeout: 10000
      timeout: 3000
      retryAttempts: 3
      retryInterval: 1500